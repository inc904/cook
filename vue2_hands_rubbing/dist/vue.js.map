{"version":3,"file":"vue.js","sources":["../src/complier/index.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 对模板进行编译\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 匹配到的分组是一个 标签名 <xxx 匹配到的是开始 标签的名字\nconst endTag = new RegExp(`<\\\\/${qnameCapture}[^>]*>`) // 匹配的是 </xxxx> 最终匹配到的分组就是结束标签的名字\n// 第一个分组就是属性的key value 就是分组3、分组4、分组5\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst startTagClose = /^\\s*(\\/?)>/ // <div> <br/>\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{asdsada}} 匹配到的内容就是我们表达式的变量\n\nconsole.log(startTagOpen)\n\nfunction parseHTML(html) {\n  //  html最开始肯定是一个 <\n  function advance(n) {\n    html = html.substring(n)\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    console.log(start)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n      console.log(11, match)\n\n      // 如果不是开始便签的结束就开始一直匹配下去\n      let attr, end\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        advance(attr[0].length)\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5] || true\n        })\n      }\n      console.log(22, html)\n\n      if (end) {\n        advance(end[0].length)\n      }\n      console.log({ match })\n      return match\n    }\n    console.log(21, html)\n\n    console.log(23, html)\n\n    return false // 不是开始标签\n  }\n  while (html) {\n    /*\n      如果 textEnd 为0 说明是一个开始标签或者结束标签\n      如果 textEnd >0 说明是一个开始就是文本的结束位置\n    */\n    let textEnd = html.indexOf('<') // 如果 indexOf 中的索引是0 则说明是一个标签\n    if (textEnd == 0) {\n      const startTagMatch = parseStartTag() // 开始标签的匹配结果\n      if (startTagMatch) {\n        continue\n        // console.log('continue:', html)\n      }\n      let endTagMatch = html.match(endTag)\n      console.log({endTagMatch})\n      if (endTagMatch) {\n        advance(endTagMatch[0].length)\n        continue\n      }\n    }\n\n    if (textEnd >= 0) {\n      // 有文本\n      let text = html.substring(0, textEnd) // 文本内容\n      if (text) {\n        advance(text.length) // 解析到的文本\n        console.log(333, html)\n      }\n    }\n  }\n  console.log(555, html)\n}\n\nexport function complieToFunction(template) {\n  /*\n    1. 将 template 转化成 ast 语法树\n    2. 生成 render方法 render 方法执行后的结果就是 虚拟DOM\n  */\n  parseHTML(template)\n  console.log(template)\n}\n","// 我们希望重写数组中的部分方法\r\nlet oldArrayProto = Array.prototype\r\n\r\n// Array.prototype.push = function (){}  // 会被直接覆盖，Bad\r\n\r\n// 拷贝 一份新的出来\r\n\r\n// newArrayProto.__proto__ = oldArrayProto\r\nexport let newArrayProto = Object.create(oldArrayProto)\r\n\r\n// newArrayProto.push = function(){}\r\n\r\n// 找到所有的变异方法\r\nlet methods = ['push', 'pop', 'shift', 'unshift', 'reverse', 'sort', 'splice']\r\n\r\nmethods.forEach(method => {\r\n  // 重写数组的方法\r\n  newArrayProto[method] = function (...args) {\r\n    // 内部调用原来的方法， 函数的劫持， 切片编程\r\n    const result = oldArrayProto[method].call(this, ...args)\r\n\r\n    // 我们需要对新增的 数据 再次进行劫持\r\n    let inserted\r\n    let ob = this.__ob__\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n      default:\r\n        break\r\n    }\r\n    console.log({inserted})\r\n    if(inserted){\r\n      // 对新增内容 再次进行观测\r\n      /*\r\n      需要用到 对数组的观测方法，考虑 从 this (data) 上引入\r\n      定义 自定义属性 data.__ob__，使得我们可以使用 Observe 上\r\n      的 数组观测方法\r\n     */\r\n      ob.observeArray(inserted)\r\n    }\r\n\r\n    return result\r\n  }\r\n})\r\n","import { newArrayProto } from './array'\r\n\r\nclass Observe {\r\n  constructor(data) {\r\n    // Object.defineProperty  只能劫持 已经存在的属性，增加的 删除的 都不会被劫持 （增加$set. $delete）\r\n    // data.__ob__ = this // 给数据加一个标识，如果数据上有 __ob__ 则说明这个属性被观测到了\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false // 将 __ob__ 变成不可枚举（循环的时候无法获取到）\r\n    })\r\n\r\n    if (Array.isArray(data)) {\r\n      // 重写 7个数组 变异方法（会修改数组本身的方法）\r\n\r\n      data.__proto__ = newArrayProto\r\n\r\n      this.observeArray(data)\r\n    } else {\r\n      this.walk(data)\r\n    }\r\n\r\n    // this.walk(data)\r\n  }\r\n  walk(data) {\r\n    // 循环对象 对属性 依次劫持\r\n    Object.keys(data).forEach(key => {\r\n      // Object.defineProperty(data, data[key],{})\r\n      // ”重新定义“ 属性\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n  observeArray(data) {\r\n    data.forEach(item => observe(item))\r\n  }\r\n}\r\n\r\nexport function defineReactive(target, key, value) {\r\n  // Object.defineProperty(data, data[key],{})\r\n\r\n  if (arguments.length == 2) value = target[key]\r\n\r\n  observe(value)\r\n\r\n  Object.defineProperty(target, key, {\r\n    get() {\r\n      console.log('用户取值了')\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      console.log('用户设置值了')\r\n      if (newValue === value) return\r\n      observe(newValue)\r\n      value = newValue\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  // 对data对象进行劫持\r\n  if (typeof data !== 'object' || data == null) return\r\n\r\n  // 如果 一个对象 被劫持过了，那就不需要再 劫持了，\r\n  // 判断对象是否被劫持， 增加了一个实例 来判断\r\n  if (data.__ob__ instanceof Observe) {\r\n    return data.__ob__\r\n  }\r\n\r\n  return new Observe(data)\r\n}\r\n","import { observe } from './observe/index'\r\n\r\nexport function initState(vm) {\r\n  // 获取所有的选项\r\n  const opts = vm.$options\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n}\r\n\r\nfunction proxy(vm, target, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[target][key]\r\n    },\r\n    set(newValue) {\r\n      vm[target][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data // data可能是函数或者对象\r\n  data = typeof data === 'function' ? data.call(vm) : data\r\n\r\n  vm._data = data\r\n  // 对数据进行劫持 Object.defineProperty\r\n  observe(data)\r\n\r\n  // 将 vm._data 用vm来代理\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n}\r\n","import { complieToFunction } from './complier'\nimport { initState } from './state'\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options\n\n    // 初始化状态\n    initState(vm)\n\n    if (options.el) {\n      vm.$mount(options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    console.log({ el })\n    const vm = this\n    el = document.querySelector(el)\n    console.log(2, { el })\n\n    let opts = vm.$options\n    if (!opts.render) {\n      // 先查找有没有render函数\n      let template // 没有render 看一下 是否写了 template ，没有写template 采用外部的template\n      if (!opts.template && el) {\n        template = el.outerHTML\n      } else {\n        if (el) {\n          // 如果有el 则采用模板的内容\n          template = opts.template\n        }\n      }\n      if (template) {\n        const render = complieToFunction(template)\n        console.log('r1', { render })\n\n        opts.render = render\n        console.log('r', { render })\n      }\n      // console.log({ template })\n    }\n  }\n}\n","import { initMixin } from './init'\n\nfunction Vue(options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\n\nexport default Vue\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","console","log","parseHTML","html","advance","n","substring","parseStartTag","start","match","tagName","attrs","length","attr","end","push","name","value","textEnd","indexOf","startTagMatch","endTagMatch","text","complieToFunction","template","oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","forEach","method","args","result","call","inserted","ob","__ob__","slice","observeArray","Observe","data","defineProperty","enumerable","isArray","__proto__","walk","keys","key","defineReactive","item","observe","target","arguments","get","set","newValue","initState","vm","opts","$options","initData","proxy","_data","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":"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"}