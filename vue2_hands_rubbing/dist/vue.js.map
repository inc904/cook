{"version":3,"file":"vue.js","sources":["../src/complier/index.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 对模板进行编译\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 匹配到的分组是一个 标签名 <xxx 匹配到的是开始 标签的名字\nconst endTag = new RegExp(`<\\\\/${qnameCapture}[^>]*>`) // 匹配的是 </xxxx> 最终匹配到的分组就是结束标签的名字\n// 第一个分组就是属性的key value 就是分组3、分组4、分组5\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst startTagClose = /^\\s*(\\/?)>/ // <div> <br/>\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{asdsada}} 匹配到的内容就是我们表达式的变量\n\n// console.log(startTagOpen)\n\nfunction parseHTML(html) {\n  const ELEMENT_TYPE = 1\n  const TEXT_TYPE = 1\n  const stack = [] // 用于存放元素的\n  let currentParent, root // 指向的是栈中的最后一个 ; 根节点\n  //  html最开始肯定是一个 <\n  while (html) {\n    /*\n      如果 textEnd 为0 说明是一个开始标签或者结束标签\n      如果 textEnd >0 说明是一个开始就是文本的结束位置\n    */\n\n    function createATSElement(tag, attrs) {\n      return {\n        tag,\n        type: ELEMENT_TYPE,\n        attrs,\n        children: [],\n        parent: null\n      }\n    }\n\n    function onStart(tag, attrs) {\n      let node = createATSElement(tag, attrs) // 创造一个 ast 节点\n      if (!root) {\n        // 看一下是否是 空树，如果是空树 则当前是输得根节点\n        root = node\n      }\n      if (currentParent) {\n        node.parent = currentParent\n        currentParent.children.push(node)\n      }\n      stack.push(node)\n      currentParent = node // currentParent 是栈中的最后一个\n    }\n    function onChars(text) {\n      text = text.replace(/\\s/g, '')\n      // 文本直接 放到 当前指向的节点中\n      currentParent?.children.push({\n        type: TEXT_TYPE,\n        text,\n        parent: currentParent\n      })\n    }\n    function onEnd(tag) {\n      //\n      stack.pop() // 将栈中的最后一个 弹出\n      currentParent = stack[stack.length - 1]\n\n      // 可以在这里校验 弹出的标签事不是 tag 是不是合法\n    }\n\n    let textEnd = html.indexOf('<') // 如果 indexOf 中的索引是0 则说明是一个标签\n    if (textEnd == 0) {\n      const startTagMatch = parseStartTag() // 开始标签的匹配结果\n      if (startTagMatch) {\n        onStart(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n\n      // // console.log('continue:', html)\n\n      // 在html截取后 只剩 标签的闭合为止的时候\n      let endTagMatch = html.match(endTag)\n      // console.log({ endTagMatch })\n      if (endTagMatch) {\n        advance(endTagMatch[0].length)\n        onEnd(endTagMatch.tagName)\n        continue\n      }\n    }\n\n    if (textEnd > 0) {\n      // 如果 indexOf 中的索引 大于0 则说明是一个 结束标签开始的文职 即文本的结束为止 hello</div>\n      // 有文本\n      let text = html.substring(0, textEnd) // 文本内容\n      if (text) {\n        onChars(text)\n        advance(text.length) // 解析到的文本\n        // console.log(333, html)\n      }\n    }\n  }\n  console.log(root)\n  function advance(n) {\n    html = html.substring(n)\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n\n      // 如果不是开始标签的结束就开始一直匹配下去\n      let attr, end\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        // // console.log('attribute==>',html.match(attribute))\n        advance(attr[0].length)\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5] || true\n        })\n      }\n\n      if (end) {\n        advance(end[0].length)\n      }\n      // console.log({ match })\n      return match\n    }\n    return false // 不是开始标签\n  }\n  // console.log(555, html)\n  // console.log(999, root)\n}\n\nexport function complieToFunction(template) {\n  /*\n    1. 将 template 转化成 ast 语法树\n    2. 生成 render方法 render 方法执行后的结果就是 虚拟DOM\n  */\n  parseHTML(template)\n  // console.log(template)\n}\n","// 我们希望重写数组中的部分方法\r\nlet oldArrayProto = Array.prototype\r\n\r\n// Array.prototype.push = function (){}  // 会被直接覆盖，Bad\r\n\r\n// 拷贝 一份新的出来\r\n\r\n// newArrayProto.__proto__ = oldArrayProto\r\nexport let newArrayProto = Object.create(oldArrayProto)\r\n\r\n// newArrayProto.push = function(){}\r\n\r\n// 找到所有的变异方法\r\nlet methods = ['push', 'pop', 'shift', 'unshift', 'reverse', 'sort', 'splice']\r\n\r\nmethods.forEach(method => {\r\n  // 重写数组的方法\r\n  newArrayProto[method] = function (...args) {\r\n    // 内部调用原来的方法， 函数的劫持， 切片编程\r\n    const result = oldArrayProto[method].call(this, ...args)\r\n\r\n    // 我们需要对新增的 数据 再次进行劫持\r\n    let inserted\r\n    let ob = this.__ob__\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n      default:\r\n        break\r\n    }\r\n    console.log({inserted})\r\n    if(inserted){\r\n      // 对新增内容 再次进行观测\r\n      /*\r\n      需要用到 对数组的观测方法，考虑 从 this (data) 上引入\r\n      定义 自定义属性 data.__ob__，使得我们可以使用 Observe 上\r\n      的 数组观测方法\r\n     */\r\n      ob.observeArray(inserted)\r\n    }\r\n\r\n    return result\r\n  }\r\n})\r\n","import { newArrayProto } from './array'\r\n\r\nclass Observe {\r\n  constructor(data) {\r\n    // Object.defineProperty  只能劫持 已经存在的属性，增加的 删除的 都不会被劫持 （增加$set. $delete）\r\n    // data.__ob__ = this // 给数据加一个标识，如果数据上有 __ob__ 则说明这个属性被观测到了\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false // 将 __ob__ 变成不可枚举（循环的时候无法获取到）\r\n    })\r\n\r\n    if (Array.isArray(data)) {\r\n      // 重写 7个数组 变异方法（会修改数组本身的方法）\r\n\r\n      data.__proto__ = newArrayProto\r\n\r\n      this.observeArray(data)\r\n    } else {\r\n      this.walk(data)\r\n    }\r\n\r\n    // this.walk(data)\r\n  }\r\n  walk(data) {\r\n    // 循环对象 对属性 依次劫持\r\n    Object.keys(data).forEach(key => {\r\n      // Object.defineProperty(data, data[key],{})\r\n      // ”重新定义“ 属性\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n  observeArray(data) {\r\n    data.forEach(item => observe(item))\r\n  }\r\n}\r\n\r\nexport function defineReactive(target, key, value) {\r\n  // Object.defineProperty(data, data[key],{})\r\n\r\n  if (arguments.length == 2) value = target[key]\r\n\r\n  observe(value)\r\n\r\n  Object.defineProperty(target, key, {\r\n    get() {\r\n      console.log('用户取值了')\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      console.log('用户设置值了')\r\n      if (newValue === value) return\r\n      observe(newValue)\r\n      value = newValue\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  // 对data对象进行劫持\r\n  if (typeof data !== 'object' || data == null) return\r\n\r\n  // 如果 一个对象 被劫持过了，那就不需要再 劫持了，\r\n  // 判断对象是否被劫持， 增加了一个实例 来判断\r\n  if (data.__ob__ instanceof Observe) {\r\n    return data.__ob__\r\n  }\r\n\r\n  return new Observe(data)\r\n}\r\n","import { observe } from './observe/index'\r\n\r\nexport function initState(vm) {\r\n  // 获取所有的选项\r\n  const opts = vm.$options\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n}\r\n\r\nfunction proxy(vm, target, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[target][key]\r\n    },\r\n    set(newValue) {\r\n      vm[target][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data // data可能是函数或者对象\r\n  data = typeof data === 'function' ? data.call(vm) : data\r\n\r\n  vm._data = data\r\n  // 对数据进行劫持 Object.defineProperty\r\n  observe(data)\r\n\r\n  // 将 vm._data 用vm来代理\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n}\r\n","import { complieToFunction } from './complier'\r\nimport { initState } from './state'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this\r\n    vm.$options = options\r\n\r\n    // 初始化状态\r\n    initState(vm)\r\n\r\n    if (options.el) {\r\n      vm.$mount(options.el)\r\n    }\r\n  }\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this\r\n    el = document.querySelector(el)\r\n\r\n    let opts = vm.$options\r\n    if (!opts.render) {\r\n      // 先查找有没有render函数\r\n      let template // 没有render 看一下 是否写了 template ，没有写template 采用外部的template\r\n      // if (!opts.template && el) {\r\n      //   template = el.outerHTML\r\n      // } else {\r\n      //   if (el) {\r\n      //     // 如果有el 则采用模板的内容\r\n      //     template = opts.template\r\n      //   }\r\n      // }\r\n      if (el) {\r\n        template = opts.template ? opts.template : el.outerHTML\r\n      }\r\n\r\n      if (template) {\r\n        console.log('r0', template)\r\n        const render = complieToFunction(template)\r\n\r\n        opts.render = render\r\n      }\r\n    }\r\n  }\r\n  // script 标签引用的 vue.global.js 这个编译过程是在浏览器运行的\r\n  // runtime是不再包含模板编译的，这个编译是打包的时候通过loader来转义 .vue 文件的\r\n  // 用 runtime的时候不能使用 template 配置项\r\n}\r\n","import { initMixin } from './init'\r\n\r\nfunction Vue(options) {\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\n\r\nexport default Vue\r\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createATSElement","tag","attrs","type","children","parent","onStart","node","push","onChars","text","replace","onEnd","pop","length","textEnd","indexOf","startTagMatch","parseStartTag","tagName","endTagMatch","match","advance","substring","console","log","n","start","attr","end","name","value","complieToFunction","template","oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","forEach","method","args","result","call","inserted","ob","__ob__","slice","observeArray","Observe","data","defineProperty","enumerable","isArray","__proto__","walk","keys","key","defineReactive","item","observe","target","arguments","get","set","newValue","initState","vm","opts","$options","initData","proxy","_data","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":";;;;;;EAAA;EACA,IAAMA,MAAM,GAAZ,8BAAA,CAAA;EACA,IAAMC,YAAY,GAAA,MAAA,CAAA,MAAA,CAAUD,MAAV,EAAA,OAAA,CAAA,CAAA,MAAA,CAAwBA,MAAxB,EAAlB,GAAA,CAAA,CAAA;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,CAAA,CAArB;;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,eAAkBF,YAAlB,EAAA,QAAA,CAAA,CAAf;EACA;;EACA,IAAMI,SAAS,GAAG,2EAAlB,CAAA;EACA,IAAMC,aAAa,GAAG,YAAtB;EAGA;;EAEA,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;IACvB,IAAMC,YAAY,GAAG,CAArB,CAAA;IACA,IAAMC,SAAS,GAAG,CAAlB,CAAA;EACA,EAAA,IAAMC,KAAK,GAAG,EAAd,CAHuB;;EAIvB,EAAA,IAAIC,aAAJ,EAAmBC,IAAnB,CAJuB;EAKvB;;EALuB,EAAA,IAAA,KAAA,GAAA,SAAA,KAAA,GAAA;EAOrB;EACJ;EACA;EACA;EAEI,IAAA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,KAA/B,EAAsC;QACpC,OAAO;EACLD,QAAAA,GAAG,EAAHA,GADK;EAELE,QAAAA,IAAI,EAAER,YAFD;EAGLO,QAAAA,KAAK,EAALA,KAHK;EAILE,QAAAA,QAAQ,EAAE,EAJL;EAKLC,QAAAA,MAAM,EAAE,IAAA;SALV,CAAA;EAOD,KAAA;;EAED,IAAA,SAASC,OAAT,CAAiBL,GAAjB,EAAsBC,KAAtB,EAA6B;QAC3B,IAAIK,IAAI,GAAGP,gBAAgB,CAACC,GAAD,EAAMC,KAAN,CAA3B,CAD2B;;QAE3B,IAAI,CAACH,IAAL,EAAW;EACT;EACAA,QAAAA,IAAI,GAAGQ,IAAP,CAAA;EACD,OAAA;;EACD,MAAA,IAAIT,aAAJ,EAAmB;UACjBS,IAAI,CAACF,MAAL,GAAcP,aAAd,CAAA;EACAA,QAAAA,aAAa,CAACM,QAAd,CAAuBI,IAAvB,CAA4BD,IAA5B,CAAA,CAAA;EACD,OAAA;;QACDV,KAAK,CAACW,IAAN,CAAWD,IAAX,CAAA,CAAA;QACAT,aAAa,GAAGS,IAAhB,CAX2B;EAY5B,KAAA;;MACD,SAASE,OAAT,CAAiBC,IAAjB,EAAuB;EAAA,MAAA,IAAA,cAAA,CAAA;;QACrBA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP,CADqB;;EAGrB,MAAA,CAAA,cAAA,GAAAb,aAAa,MAAb,IAAA,IAAA,cAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,cAAA,CAAeM,QAAf,CAAwBI,IAAxB,CAA6B;EAC3BL,QAAAA,IAAI,EAAEP,SADqB;EAE3Bc,QAAAA,IAAI,EAAJA,IAF2B;EAG3BL,QAAAA,MAAM,EAAEP,aAAAA;SAHV,CAAA,CAAA;EAKD,KAAA;;MACD,SAASc,KAAT,CAAeX,GAAf,EAAoB;EAClB;QACAJ,KAAK,CAACgB,GAAN,EAAA,CAFkB;;QAGlBf,aAAa,GAAGD,KAAK,CAACA,KAAK,CAACiB,MAAN,GAAe,CAAhB,CAArB,CAHkB;EAMnB,KAAA;;MAED,IAAIC,OAAO,GAAGrB,IAAI,CAACsB,OAAL,CAAa,GAAb,CAAd,CApDqB;;MAqDrB,IAAID,OAAO,IAAI,CAAf,EAAkB;EAChB,MAAA,IAAME,aAAa,GAAGC,aAAa,EAAnC,CADgB;;EAEhB,MAAA,IAAID,aAAJ,EAAmB;UACjBX,OAAO,CAACW,aAAa,CAACE,OAAf,EAAwBF,aAAa,CAACf,KAAtC,CAAP,CAAA;EACA,QAAA,OAAA,UAAA,CAAA;EACD,OALe;EAShB;;;QACA,IAAIkB,WAAW,GAAG1B,IAAI,CAAC2B,KAAL,CAAW/B,MAAX,CAAlB,CAVgB;;EAYhB,MAAA,IAAI8B,WAAJ,EAAiB;EACfE,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAD,CAAX,CAAeN,MAAhB,CAAP,CAAA;EACAF,QAAAA,KAAK,CAACQ,WAAW,CAACD,OAAb,CAAL,CAAA;EACA,QAAA,OAAA,UAAA,CAAA;EACD,OAAA;EACF,KAAA;;MAED,IAAIJ,OAAO,GAAG,CAAd,EAAiB;EACf;EACA;QACA,IAAIL,IAAI,GAAGhB,IAAI,CAAC6B,SAAL,CAAe,CAAf,EAAkBR,OAAlB,CAAX,CAHe;;EAIf,MAAA,IAAIL,IAAJ,EAAU;UACRD,OAAO,CAACC,IAAD,CAAP,CAAA;EACAY,QAAAA,OAAO,CAACZ,IAAI,CAACI,MAAN,CAAP,CAFQ;EAGR;EACD,OAAA;EACF,KAAA;EAjFoB,GAAA,CAAA;;EAMvB,EAAA,OAAOpB,IAAP,EAAa;EAAA,IAAA,IAAA,IAAA,GAAA,KAAA,EAAA,CAAA;;MAAA,IA8DP,IAAA,KAAA,UAAA,EAAA,SAAA;EAcL,GAAA;;IACD8B,OAAO,CAACC,GAAR,CAAY1B,IAAZ,CAAA,CAAA;;IACA,SAASuB,OAAT,CAAiBI,CAAjB,EAAoB;EAClBhC,IAAAA,IAAI,GAAGA,IAAI,CAAC6B,SAAL,CAAeG,CAAf,CAAP,CAAA;EACD,GAAA;;EACD,EAAA,SAASR,aAAT,GAAyB;EACvB,IAAA,IAAMS,KAAK,GAAGjC,IAAI,CAAC2B,KAAL,CAAWjC,YAAX,CAAd,CAAA;;EACA,IAAA,IAAIuC,KAAJ,EAAW;EACT,MAAA,IAAMN,KAAK,GAAG;EACZF,QAAAA,OAAO,EAAEQ,KAAK,CAAC,CAAD,CADF;EAEZzB,QAAAA,KAAK,EAAE,EAAA;SAFT,CAAA;QAIAoB,OAAO,CAACK,KAAK,CAAC,CAAD,CAAL,CAASb,MAAV,CAAP,CALS;;QAQT,IAAIc,IAAJ,EAAUC,GAAV,CAAA;;EACA,MAAA,OAAO,EAAEA,GAAG,GAAGnC,IAAI,CAAC2B,KAAL,CAAW7B,aAAX,CAAR,MAAuCoC,IAAI,GAAGlC,IAAI,CAAC2B,KAAL,CAAW9B,SAAX,CAA9C,CAAP,EAA6E;EAC3E;EACA+B,QAAAA,OAAO,CAACM,IAAI,CAAC,CAAD,CAAJ,CAAQd,MAAT,CAAP,CAAA;EACAO,QAAAA,KAAK,CAACnB,KAAN,CAAYM,IAAZ,CAAiB;EACfsB,UAAAA,IAAI,EAAEF,IAAI,CAAC,CAAD,CADK;EAEfG,UAAAA,KAAK,EAAEH,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAA1B,IAAiC,IAAA;WAF1C,CAAA,CAAA;EAID,OAAA;;EAED,MAAA,IAAIC,GAAJ,EAAS;EACPP,QAAAA,OAAO,CAACO,GAAG,CAAC,CAAD,CAAH,CAAOf,MAAR,CAAP,CAAA;EACD,OApBQ;;;EAsBT,MAAA,OAAOO,KAAP,CAAA;EACD,KAAA;;MACD,OAAO,KAAP,CA1BuB;EA2BxB,GAlHsB;EAoHvB;;EACD,CAAA;;EAEM,SAASW,iBAAT,CAA2BC,QAA3B,EAAqC;EAC1C;EACF;EACA;EACA;EACExC,EAAAA,SAAS,CAACwC,QAAD,CAAT,CAL0C;EAO3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EC1ID;EACA,IAAIC,aAAa,GAAGC,KAAK,CAACC,SAA1B;EAIA;EAEA;;EACO,IAAIC,aAAa,GAAGC,MAAM,CAACC,MAAP,CAAcL,aAAd,CAApB;EAIP;;EACA,IAAIM,OAAO,GAAG,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,EAAyB,SAAzB,EAAoC,SAApC,EAA+C,MAA/C,EAAuD,QAAvD,CAAd,CAAA;EAEAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACxB;EACAL,EAAAA,aAAa,CAACK,MAAD,CAAb,GAAwB,YAAmB;EAAA,IAAA,IAAA,qBAAA,CAAA;;EAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANC,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;QAANA,IAAM,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,KAAA;;EACzC;EACA,IAAA,IAAMC,MAAM,GAAG,CAAAV,qBAAAA,GAAAA,aAAa,CAACQ,MAAD,CAAb,EAAsBG,IAAtB,+BAA2B,IAA3B,CAAA,CAAA,MAAA,CAAoCF,IAApC,CAAA,CAAf,CAFyC;;;EAKzC,IAAA,IAAIG,QAAJ,CAAA;MACA,IAAIC,EAAE,GAAG,IAAA,CAAKC,MAAd,CAAA;;EACA,IAAA,QAAQN,MAAR;EACE,MAAA,KAAK,MAAL,CAAA;EACA,MAAA,KAAK,SAAL;EACEI,QAAAA,QAAQ,GAAGH,IAAX,CAAA;EACA,QAAA,MAAA;;EACF,MAAA,KAAK,QAAL;EACEG,QAAAA,QAAQ,GAAGH,IAAI,CAACM,KAAL,CAAW,CAAX,CAAX,CAAA;EANJ,KAAA;;MAUAzB,OAAO,CAACC,GAAR,CAAY;EAACqB,MAAAA,QAAQ,EAARA,QAAAA;OAAb,CAAA,CAAA;;EACA,IAAA,IAAGA,QAAH,EAAY;EACV;;EACA;EACN;EACA;EACA;EACA;QACMC,EAAE,CAACG,YAAH,CAAgBJ,QAAhB,CAAA,CAAA;EACD,KAAA;;EAED,IAAA,OAAOF,MAAP,CAAA;KA5BF,CAAA;EA8BD,CAhCD,CAAA;;MCbMO;EACJ,EAAA,SAAA,OAAA,CAAYC,IAAZ,EAAkB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,CAAA,CAAA;;EAChB;EACA;EACAd,IAAAA,MAAM,CAACe,cAAP,CAAsBD,IAAtB,EAA4B,QAA5B,EAAsC;EACpCrB,MAAAA,KAAK,EAAE,IAD6B;QAEpCuB,UAAU,EAAE,KAFwB;;OAAtC,CAAA,CAAA;;EAKA,IAAA,IAAInB,KAAK,CAACoB,OAAN,CAAcH,IAAd,CAAJ,EAAyB;EACvB;QAEAA,IAAI,CAACI,SAAL,GAAiBnB,aAAjB,CAAA;QAEA,IAAKa,CAAAA,YAAL,CAAkBE,IAAlB,CAAA,CAAA;EACD,KAND,MAMO;QACL,IAAKK,CAAAA,IAAL,CAAUL,IAAV,CAAA,CAAA;EACD,KAhBe;;EAmBjB,GAAA;;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKA,IAAL,EAAW;EACT;QACAd,MAAM,CAACoB,IAAP,CAAYN,IAAZ,EAAkBX,OAAlB,CAA0B,UAAAkB,GAAG,EAAI;EAC/B;EACA;UACAC,cAAc,CAACR,IAAD,EAAOO,GAAP,EAAYP,IAAI,CAACO,GAAD,CAAhB,CAAd,CAAA;SAHF,CAAA,CAAA;EAKD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,YAAA,CAAaP,IAAb,EAAmB;EACjBA,MAAAA,IAAI,CAACX,OAAL,CAAa,UAAAoB,IAAI,EAAA;UAAA,OAAIC,OAAO,CAACD,IAAD,CAAX,CAAA;SAAjB,CAAA,CAAA;EACD,KAAA;;;;;;EAGI,SAASD,cAAT,CAAwBG,MAAxB,EAAgCJ,GAAhC,EAAqC5B,KAArC,EAA4C;EACjD;IAEA,IAAIiC,SAAS,CAAClD,MAAV,IAAoB,CAAxB,EAA2BiB,KAAK,GAAGgC,MAAM,CAACJ,GAAD,CAAd,CAAA;IAE3BG,OAAO,CAAC/B,KAAD,CAAP,CAAA;EAEAO,EAAAA,MAAM,CAACe,cAAP,CAAsBU,MAAtB,EAA8BJ,GAA9B,EAAmC;EACjCM,IAAAA,GADiC,EAC3B,SAAA,GAAA,GAAA;QACJzC,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAA,CAAA;EACA,MAAA,OAAOM,KAAP,CAAA;OAH+B;MAKjCmC,GALiC,EAAA,SAAA,GAAA,CAK7BC,QAL6B,EAKnB;QACZ3C,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAA,CAAA;QACA,IAAI0C,QAAQ,KAAKpC,KAAjB,EAAwB,OAAA;QACxB+B,OAAO,CAACK,QAAD,CAAP,CAAA;EACApC,MAAAA,KAAK,GAAGoC,QAAR,CAAA;EACD,KAAA;KAVH,CAAA,CAAA;EAYD,CAAA;EAEM,SAASL,OAAT,CAAiBV,IAAjB,EAAuB;EAC5B;IACA,IAAI,OAAA,CAAOA,IAAP,CAAA,KAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAxC,EAA8C,OAFlB;EAK5B;;EACA,EAAA,IAAIA,IAAI,CAACJ,MAAL,YAAuBG,OAA3B,EAAoC;MAClC,OAAOC,IAAI,CAACJ,MAAZ,CAAA;EACD,GAAA;;EAED,EAAA,OAAO,IAAIG,OAAJ,CAAYC,IAAZ,CAAP,CAAA;EACD;;EClEM,SAASgB,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B;EACA,EAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAAA;;IACA,IAAID,IAAI,CAAClB,IAAT,EAAe;MACboB,QAAQ,CAACH,EAAD,CAAR,CAAA;EACD,GAAA;EACF,CAAA;;EAED,SAASI,KAAT,CAAeJ,EAAf,EAAmBN,MAAnB,EAA2BJ,GAA3B,EAAgC;EAC9BrB,EAAAA,MAAM,CAACe,cAAP,CAAsBgB,EAAtB,EAA0BV,GAA1B,EAA+B;EAC7BM,IAAAA,GAD6B,EACvB,SAAA,GAAA,GAAA;EACJ,MAAA,OAAOI,EAAE,CAACN,MAAD,CAAF,CAAWJ,GAAX,CAAP,CAAA;OAF2B;MAI7BO,GAJ6B,EAAA,SAAA,GAAA,CAIzBC,QAJyB,EAIf;EACZE,MAAAA,EAAE,CAACN,MAAD,CAAF,CAAWJ,GAAX,IAAkBQ,QAAlB,CAAA;EACD,KAAA;KANH,CAAA,CAAA;EAQD,CAAA;;EAED,SAASK,QAAT,CAAkBH,EAAlB,EAAsB;IACpB,IAAIjB,IAAI,GAAGiB,EAAE,CAACE,QAAH,CAAYnB,IAAvB,CADoB;;EAEpBA,EAAAA,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACP,IAAL,CAAUwB,EAAV,CAA7B,GAA6CjB,IAApD,CAAA;EAEAiB,EAAAA,EAAE,CAACK,KAAH,GAAWtB,IAAX,CAJoB;;EAMpBU,EAAAA,OAAO,CAACV,IAAD,CAAP,CANoB;;EASpB,EAAA,KAAK,IAAIO,GAAT,IAAgBP,IAAhB,EAAsB;EACpBqB,IAAAA,KAAK,CAACJ,EAAD,EAAK,OAAL,EAAcV,GAAd,CAAL,CAAA;EACD,GAAA;EACF;;EC9BM,SAASgB,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACxC,SAAJ,CAAcyC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;MACvC,IAAMT,EAAE,GAAG,IAAX,CAAA;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcO,OAAd,CAFuC;;MAKvCV,SAAS,CAACC,EAAD,CAAT,CAAA;;MAEA,IAAIS,OAAO,CAACC,EAAZ,EAAgB;EACdV,MAAAA,EAAE,CAACW,MAAH,CAAUF,OAAO,CAACC,EAAlB,CAAA,CAAA;EACD,KAAA;KATH,CAAA;;EAWAH,EAAAA,GAAG,CAACxC,SAAJ,CAAc4C,MAAd,GAAuB,UAAUD,EAAV,EAAc;MACnC,IAAMV,EAAE,GAAG,IAAX,CAAA;EACAU,IAAAA,EAAE,GAAGE,QAAQ,CAACC,aAAT,CAAuBH,EAAvB,CAAL,CAAA;EAEA,IAAA,IAAIT,IAAI,GAAGD,EAAE,CAACE,QAAd,CAAA;;EACA,IAAA,IAAI,CAACD,IAAI,CAACa,MAAV,EAAkB;EAChB;QACA,IAAIlD,QAAJ,CAFgB;EAGhB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACA,MAAA,IAAI8C,EAAJ,EAAQ;UACN9C,QAAQ,GAAGqC,IAAI,CAACrC,QAAL,GAAgBqC,IAAI,CAACrC,QAArB,GAAgC8C,EAAE,CAACK,SAA9C,CAAA;EACD,OAAA;;EAED,MAAA,IAAInD,QAAJ,EAAc;EACZT,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBQ,QAAlB,CAAA,CAAA;EACA,QAAA,IAAMkD,MAAM,GAAGnD,iBAAiB,CAACC,QAAD,CAAhC,CAAA;UAEAqC,IAAI,CAACa,MAAL,GAAcA,MAAd,CAAA;EACD,OAAA;EACF,KAAA;EACF,GA3BD,CAZ6B;EAyC7B;EACA;;EACD;;EC5CD,SAASP,GAAT,CAAaE,OAAb,EAAsB;IACpB,IAAKD,CAAAA,KAAL,CAAWC,OAAX,CAAA,CAAA;EACD,CAAA;;EAEDH,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}